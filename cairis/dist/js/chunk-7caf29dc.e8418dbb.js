(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7caf29dc","chunk-5d9ab32a"],{"0d49":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"objects"},[n("b-breadcrumb",{attrs:{items:e.bcItems}}),n("object-dependency-modal",{ref:"depDialog",attrs:{dependencies:e.objectDependencies},on:{"object-dependency-ok":e.deleteDependencies}}),n("b-card",{attrs:{"no-body":""}},["requirement"==e.dimension?n("b-container",{attrs:{fluid:""}},[n("b-row",[n("b-col",[n("b-form-group",{attrs:{label:"Asset","label-for":"reqAsset","label-cols":5}},[n("dimension-select",{ref:"assetFilter",attrs:{id:"assetEnvironment",dimension:"asset"},on:{"dimension-select-change":e.assetSelected}})],1)],1),n("b-col",[n("b-form-group",{attrs:{label:"Environment","label-for":"reqEnvironment","label-cols":5}},[n("dimension-select",{ref:"envFilter",attrs:{id:"reqEnvironment",dimension:"environment"},on:{"dimension-select-change":e.environmentSelected}})],1)],1)],1)],1):e._e(),n("b-table",{attrs:{"b-table":"",striped:"",small:"",hover:"",fields:e.objectsFields,items:e.items},on:{"row-clicked":e.objectClicked},scopedSlots:e._u([{key:"HEAD_objectsactions",fn:function(t){return[n("font-awesome-icon",{style:{color:"green"},attrs:{icon:"plus"},on:{click:function(t){return t.stopPropagation(),e.addObject(t)}}})]}},{key:"objectsactions",fn:function(t){return[n("font-awesome-icon",{style:{color:"red"},attrs:{icon:"minus"},on:{click:function(n){return n.stopPropagation(),e.deleteObject(t.index)}}})]}},{key:"generategoalaction",fn:function(t){return[n("font-awesome-icon",{style:{color:"green"},attrs:{icon:"angle-down"},on:{click:function(n){return n.stopPropagation(),e.generateGoal(t.index)}}})]}}])})],1)],1)},s=[],a=n("f499"),o=n.n(a),r=n("bc3a"),c=n.n(r),d=n("61da"),m=n("1864"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{ref:"objectDependencyDialog",attrs:{title:"Confirm object deletion"},on:{ok:e.onOk}},[n("b-card",[n("p",[n("b",[e._v("Removing this object will also remove the following objects.")])]),n("b-table",{attrs:{striped:"",bordered:"",small:"",items:e.dependencies,fields:e.odTableFields}}),n("p",[n("b",[e._v("Do you want to continue?")])])],1)],1)},h=[],u={name:"object-dependency-modal",props:{dependencies:Array},data:function(){return{odTableFields:{theDimensionName:{label:"Dimension"},theObjectName:{label:"Name"}}}},methods:{show:function(){this.$refs.objectDependencyDialog.show()},onOk:function(){this.$emit("object-dependency-ok"),this.$refs.objectDependencyDialog.hide()}}},p=u,f=n("2877"),b=Object(f["a"])(p,l,h,!1,null,null,null),N=b.exports,v={props:{breadCrumbItems:Array,fieldList:Object,getUrl:String,delUrl:String,dimName:String},components:{DimensionSelect:m["default"],ObjectDependencyModal:N},data:function(){return{bcItems:this.breadCrumbItems,dimension:this.dimName,items:[],theGetUrl:this.getUrl,objectsFields:this.fieldList,objectDependencies:[],selectedObject:"",selectedIndex:-1}},watch:{theGetUrl:"loadObjects"},methods:{objectClicked:function(e){"requirement"==this.dimName?this.$router.push({name:this.dimName,params:{objectName:e.theName,domain:this.$refs.assetFilter.selected.length>0?{type:"asset",name:this.$refs.assetFilter.selected}:{type:"environment",name:this.$refs.envFilter.selected}}}):"vulnerability"==this.dimName?this.$router.push({name:this.dimName,params:{objectName:e.theVulnerabilityName}}):"personacharacteristic"==this.dimName?this.$router.push({name:this.dimName,params:{objectName:e.theCharacteristic}}):"kaosassociation"==this.dimName?this.$router.push({name:this.dimName,params:{envName:e.theEnvironmentName,goalName:e.theGoal,subGoalName:e.theSubGoal}}):"dependency"==this.dimName?this.$router.push({name:this.dimName,params:{envName:e.theEnvironmentName,depName:e.theDepender,deeName:e.theDependee,dpyName:e.theDependency}}):"dataflow"==this.dimName?this.$router.push({name:this.dimName,params:{objectName:e.theName,envName:e.theEnvironmentName}}):this.$router.push({name:this.dimName,params:{objectName:e.theName}})},addObject:function(){"kaosassociation"==this.dimension&&this.$router.push({name:this.dimName,params:{envName:"To set",goalName:"To set",subGoalName:"To set"}}),"dependency"==this.dimension&&this.$router.push({name:this.dimName,params:{envName:"To set",depName:"To set",deeName:"To set",dpyName:"To set"}}),"dataflow"==this.dimension?this.$router.push({name:this.dimName,params:{objectName:"New "+this.dimName,envName:"To set"}}):this.$router.push({name:this.dimName,params:{objectName:"New "+this.dimName,domain:{type:"asset",name:""}}})},deleteObject:function(e){"vulnerability"==this.dimName?this.selectedObject=this.items[e].theVulnerabilityName:"kaosassociation"==this.dimName?this.selectedObject={envName:this.items[e].theEnvironmentName,goal:this.items[e].theGoal,subGoal:this.items[e].theSubGoal}:"dependency"==this.dimName?this.selectedObject={envName:this.items[e].theEnvironmentName,theDepender:this.items[e].theDepender,theDependee:this.items[e].theDependee,theDependency:this.items[e].theDependency}:"personacharacteristic"==this.dimName?this.selectedObject=this.items[e].theCharacteristic:this.selectedObject=this.items[e].theName,this.selectedIndex=e;var t=this;if("kaosassociation"!=this.dimension&&"dependency"!=this.dimension&&"dataflow"!=this.dimension){var n=this.dimension;"personacharacteristic"==n&&(n="persona_characteristic");var i="/api/object_dependency/dimension/"+n+"/object/"+this.selectedObject;c.a.get(i,{baseURL:this.$store.state.url,params:{session_id:this.$store.state.session}}).then(function(e){e.data.theDependencies.length>0?(t.objectDependencies=e.data.theDependencies,t.$refs.depDialog.show()):t.commitDelete()}).catch(function(e){d["a"].$emit("operation-failure",e)})}else this.commitDelete()},commitDelete:function(){var e=this,t=this.delUrl;"kaosassociation"==this.dimension?t+=this.selectedObject.envName+"/goal/"+this.selectedObject.goal+"/subgoal/"+this.selectedObject.subGoal:"dependency"==this.dimension?t+=this.selectedObject.envName+"/depender/"+this.selectedObject.theDepender+"/dependee/"+this.selectedObject.theDependee+"/dependency/"+this.selectedObject.theDependency:"dataflow"==this.dimension?t+=this.selectedObject.objectName+"/environment/"+this.selectedObject.envName:t+=JSON.parse(o()(this.selectedObject)),c.a.delete(t,{baseURL:this.$store.state.url,params:{session_id:this.$store.state.session}}).then(function(t){e.items.splice(e.selectedIndex,1),d["a"].$emit("operation-success",t.data.message)}).catch(function(e){d["a"].$emit("operation-failure",e)})},deleteDependencies:function(){var e="/api/object_dependency/dimension/"+this.dimension+"/object/"+this.selectedObject,t=this;c.a.delete(e,{baseURL:this.$store.state.url,params:{session_id:this.$store.state.session}}).then(function(){t.commitDelete()}).catch(function(e){d["a"].$emit("operation-failure",e)})},loadObjects:function(){var e=this;""!=this.theGetUrl&&c.a.get(this.theGetUrl,{baseURL:this.$store.state.url,params:{session_id:this.$store.state.session}}).then(function(t){e.items=t.data}).catch(function(e){d["a"].$emit("operation-failure",e)})},assetSelected:function(e){null!=e&&(this.theGetUrl="/api/requirements/asset/"+e,this.$refs.envFilter.selected="")},environmentSelected:function(e){null!=e&&(this.theGetUrl="/api/requirements/environment/"+e,this.$refs.assetFilter.selected="")},generateGoal:function(e){var t=this.$store.state.url+"/api/responses/name/"+this.items[e].theName+"/generate_goal";c.a.post(t,{session_id:this.$store.state.session,object:this.objt}).then(function(e){d["a"].$emit("operation-success",e.data.message)}).catch(function(e){d["a"].$emit("operation-failure",e)})}},mounted:function(){this.loadObjects(),"externaldocument"==this.dimName?this.dimension="external_document":"documentreference"==this.dimName?this.dimension="document_reference":"conceptreference"==this.dimName?this.dimension="concept_reference":"trustboundary"==this.dimName&&(this.dimension="trust_boundary")}},g=v,j=Object(f["a"])(g,i,s,!1,null,null,null);t["a"]=j.exports},1864:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-form-select",{ref:"dimensionSelect",attrs:{id:"dimensionSelect",disabled:e.is_disabled,size:e.display_size,options:e.filteredItems},on:{change:function(t){return e.onChange(t)}},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})},s=[],a=(n("6762"),n("2fdb"),n("bc3a")),o=n.n(a),r=n("61da"),c={name:"dimension-select",props:{dimension:{type:String},dimensionUrl:{type:String,default:function(){return""}},existing:{type:Array,default:function(){return[]}},environment:{type:String,default:function(){return""}},includeall:{type:Boolean,default:function(){return!1}},initial:{type:String,default:function(){return""}},display_size:{type:String,default:function(){return"md"}},is_disabled:{type:Boolean,default:function(){return!1}}},data:function(){return{items:[],selected:this.initial}},computed:{filteredItems:function(){var e=this;return this.items.length>0?this.items.filter(function(t){if(!e.existing.includes(t))return t}):[]}},watch:{dimension:"updateSelector",dimensionUrl:"updateSelector",existing:"updateSelector",environment:"updateSelector",initial:"updateSelector"},methods:{onChange:function(e){this.$emit("dimension-select-change",e)},updateSelector:function(){var e=this;if(void 0!=this.dimension||""!=this.dimensionUrl){var t=this.dimensionUrl;0==this.dimensionUrl.length&&(t="/api/dimensions/table/"+this.dimension,""!=this.environment&&(t+="/environment/"+this.environment));var n=this;o.a.get(t,{baseURL:this.$store.state.url,params:{session_id:this.$store.state.session}}).then(function(t){n.items=t.data,n.items=n.items.length>0?n.items.filter(function(e){if(!n.existing.includes(e))return e}):[],1==n.items.length&&n.$emit("dimension-select-change",n.items[0]),n.includeall&&("dfd_filter"==n.dimension?n.items.unshift("None"):"persona_characteristic"==n.dimension?n.items.unshift("All"):n.items.unshift("all")),e.selected=e.initial}).catch(function(e){r["a"].$emit("operation-failure","Error updating selector:"+e)})}}},mounted:function(){void 0==this.dimension&&""==this.dimensionUrl||this.updateSelector()}},d=c,m=n("2877"),l=Object(m["a"])(d,i,s,!1,null,null,null);t["default"]=l.exports},"2fdb":function(e,t,n){"use strict";var i=n("5ca1"),s=n("d2c8"),a="includes";i(i.P+i.F*n("5147")(a),"String",{includes:function(e){return!!~s(this,e,a).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},5147:function(e,t,n){var i=n("2b4c")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[i]=!1,!"/./"[e](t)}catch(s){}}return!0}},"584a":function(e,t){var n=e.exports={version:"2.6.1"};"number"==typeof __e&&(__e=n)},6762:function(e,t,n){"use strict";var i=n("5ca1"),s=n("c366")(!0);i(i.P,"Array",{includes:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")("includes")},a0ac:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"documentreferences"},[n("objects",{attrs:{breadCrumbItems:e.bcItems,fieldList:e.objectsFields,getUrl:e.theGetUrl,delUrl:e.theDelUrl,dimName:e.dimension}})],1)},s=[],a=n("0d49"),o={components:{Objects:a["a"]},data:function(){return{bcItems:[{text:"Home",to:{name:"home"}},{text:"Document References",to:{name:"documentreferences"}}],items:[],objectsFields:{objectsactions:{label:""},theName:{label:"Name",sortable:!0},theDocName:{label:"Document",sortable:!0}},theGetUrl:"/api/document_references",theDelUrl:"/api/document_references/name/",dimension:"documentreference"}}},r=o,c=n("2877"),d=Object(c["a"])(r,i,s,!1,null,null,null);t["default"]=d.exports},a21f:function(e,t,n){var i=n("584a"),s=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return s.stringify.apply(s,arguments)}},aae3:function(e,t,n){var i=n("d3f4"),s=n("2d95"),a=n("2b4c")("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==s(e))}},d2c8:function(e,t,n){var i=n("aae3"),s=n("be13");e.exports=function(e,t,n){if(i(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(s(e))}},f499:function(e,t,n){e.exports=n("a21f")}}]);
//# sourceMappingURL=chunk-7caf29dc.e8418dbb.js.map